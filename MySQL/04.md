# Event Sourcing

* `log_xxx` table provides a complete history of events
* Referential integrity is not needed
* Data consistency is not needed

## fruits && log_fruits

```sql
CREATE TABLE fruits (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    price DECIMAL(20,2),
    tags JSON,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

```sql
CREATE TABLE log_fruits (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fruit_id INT NOT NULL,
    ip_address VARCHAR(255) NOT NULL,
    user_id VARCHAR(255) NOT NULL,
    user_group VARCHAR(255) NOT NULL,
    activity VARCHAR(255) NOT NULL,
    record JSON NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);
```
